# Form Father

[![npm version](https://img.shields.io/npm/v/form-father)](https://www.npmjs.com/package/form-father)
[![npm downloads](https://img.shields.io/npm/dm/form-father)](https://www.npmjs.com/package/form-father)

- [üá¨üáß English documentation](https://github.com/Poliklot/form-father/blob/master/docs/en/README.md)

**Form Father** ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è —É–¥–æ–±–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–∫—É
—Ñ–æ—Ä–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeScript.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –ø–æ–º–æ—â—å—é npm:

```bash
npm install form-father
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import Form from 'form-father';

Form.setDefaultParams({
	showLoaderButton: false,
	scrollToFirstErroredInput: false,
	logging: true,
});

const formElement = document.querySelector('#myForm');
const options = {
	onSubmit: formInstance => {
		// –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
	},
	onResponse: (responseBody, formInstance) => {
		// –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
	},
	// –î—Ä—É–≥–∏–µ –æ–ø—Ü–∏–∏...
};

const form = new Form(formElement, options);
```

## –û–ø—Ü–∏–∏

- **onSubmit**: –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –≤—ã–∑—ã–≤–∞–µ–º–∞—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã.
- **onResponse**: –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.
- **onResponseSuccess**: –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å 200).
- **onResponseUnsuccess**: –§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ–º –æ—Ç–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å –Ω–µ 200).
- **showLoaderButton**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ª–æ–∞–¥–µ—Ä –≤ –∫–Ω–æ–ø–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`.
- **scrollToFirstErroredInput**: –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å –ª–∏ –∫ –ø–µ—Ä–≤–æ–º—É –ø–æ–ª—é —Å –æ—à–∏–±–∫–æ–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`.
- **customTypeError**: –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ç–∏–ø –æ—à–∏–±–∫–∏.
- **loaderColor**: –¶–≤–µ—Ç –ª–æ–∞–¥–µ—Ä–∞ –≤ –∫–Ω–æ–ø–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏.
- **logging**: –ù—É–∂–Ω–æ –ª–∏ –≤—ã–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`.

## –ú–µ—Ç–æ–¥—ã

- **clearInputs()**: –û—á–∏—â–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ —Ñ–æ—Ä–º—ã.
- **setDefaultParams(params)**: –ú–µ—Ç–æ–¥ setDefaultParams –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö
  —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Ñ–æ—Ä–º—ã. –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã.

## –•–µ–ª–ø–µ—Ä—ã

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—è–¥ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

- **serializeToFormData($element)**: –°–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤ –æ–±—ä–µ–∫—Ç `FormData`.
- **isEmailValid(value)**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤–∞–ª–∏–¥–Ω—ã–º –∞–¥—Ä–µ—Å–æ–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã.
- **isUrlValid(value)**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤–∞–ª–∏–¥–Ω—ã–º URL.
- **isPhoneValid(value)**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –≤–∞–ª–∏–¥–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
- **closest($el, selector)**: –ù–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à–∏–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Å–µ–ª–µ–∫—Ç–æ—Ä—É.
- **blockScrollBody()**: –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
- **unblockScrollBody()**: –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
- **parseCommonResponseProperties(responseBody)**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞.

## –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã

Form Father –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –±–∞–∑–æ–≤—ã–º –Ω–∞–±–æ—Ä–æ–º –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å
—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ.

### –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

| –ö–ª—é—á          | –ü—Ä–æ–≤–µ—Ä–∫–∞                        | –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| ------------- | ------------------------------- | ---------------------- |
| `required`    | –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–ø—É—Å—Ç–æ–µ               | **–ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**    |
| `email`       | –≤–∞–ª–∏–¥–Ω—ã–π e-mail                 | **–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**    |
| `tel`         | —Ä–æ—Å—Å–∏–π—Å–∫–∏–π –Ω–æ–º–µ—Ä `+7XXXXXXXXXX` | **–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**    |
| `url`         | `http(s)://‚Ä¶` —Å –¥–æ–º–µ–Ω–æ–º         | **–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**    |
| `not-numbers` | —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ —Ü–∏—Ñ—Ä                 | **–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**    |

> [!NOTE] –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–∞–∫:
>
> ```js
> import { getAllValidators } from 'form-father';
>
> const all = getAllValidators();
> console.log([...all.keys()]);
> ```

---

### –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (`Form.defaultValidationSchema`)

```ts
Form.defaultValidationSchema = {
	email: {
		selector: 'input[type="email"]', // CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–±–∏—Ä–∞—é—Ç—Å—è inputs
		rules: ['required', 'email'],
	},
	tel: {
		selector: 'input[type="tel"]',
		rules: ['required', 'tel'],
	},
};
```

- **selector** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π CSS. –ï—Å–ª–∏ –æ–Ω —É–∫–∞–∑–∞–Ω, –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —ç—Ç–æ–º—É
  —Å–µ–ª–µ–∫—Ç–æ—Ä—É. –ï—Å–ª–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –Ω–µ—Ç, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ç—Ä–∏–±—É—Ç `data-validate`.
- –¢—É –∂–µ —Å—Ö–µ–º—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `validationSchema` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã.

---

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ (`validationSchema`)

```ts
const form = new Form($form, {
	validationSchema: {
		tel: {
			// –∫–ª—é—á –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π
			selector: '[data-validate="tel"]',
			rules: ['tel', 'begin+79277'],
			messages: {
				tel: '–¢–µ–ª–µ—Ñ–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7‚Ä¶',
				'begin+79277': '–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è –Ω–∞ +79277',
			},
		},
	},
});
```

_–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –æ–¥–Ω–æ–≥–æ `<input>`:_

1. `required` (–µ—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç `required`)
2. –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `validationSchema`
3. –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `data-custom-validate`

---

### –ü—Ä–∞–≤–∏–ª–æ —á–µ—Ä–µ–∑ `data-custom-validate`

```html
<input name="code" data-custom-validate="only-digits:6" required />
```

- –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è `[FormFather] Unknown validation rule "foo"`.

---

### –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä

```ts
import { registerValidator } from 'form-father';

registerValidator(
	'only-digits',
	(v, _input, _form, len) => new RegExp(`^\d{${len}}$`).test(v),
	'–î–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã',
);
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```html
<input name="code" data-custom-validate="only-digits:6" required />
```

---

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

```ts
registerValidator(
	'tel',
	v => /^8\d{10}$/.test(v), // –Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
	'–ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è –Ω–∞ 8‚Ä¶', // –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
	{ override: true }, // ‚Üê –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
);
```

_–ë–µ–∑ `override: true` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Å—Ç–∞–≤–∏—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –∏ –≤—ã–≤–µ–¥–µ—Ç warn._

---

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏

#### –ì–ª–æ–±–∞–ª—å–Ω–æ

```ts
const vd = getValidator('email');
if (vd) vd.defaultMessage = '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π e-mail';
```

#### –õ–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ñ–æ—Ä–º—ã

```ts
validationSchema: {
  email: {
    selector: 'input[type="email"]',
    rules: ['email'],
    messages: { email: '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π e-mail' },
  },
}
```

---

### –ò—Ç–æ–≥–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏

```
required  ‚Üí  schema.rules  ‚Üí  data-custom-validate
```

- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ** –Ω–∞–π–¥–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –¥–æ –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–æ—ç—Ç–æ–º—É –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

## –°–±–æ—Ä–∫–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Rollup**. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- **npm run build**: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞.
- **npm run watch**: –°–±–æ—Ä–∫–∞ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è.
- **npm run demos**: –ó–∞–ø—É—Å–∫ –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Vite.

## –í–∫–ª–∞–¥

–ë—É–¥–µ–º —Ä–∞–¥—ã –≤–∞—à–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –∏ —É–ª—É—á—à–µ–Ω–∏—è–º! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ
[issues](https://github.com/poliklot/form-father/issues) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ
[pull requests](https://github.com/poliklot/form-father/pulls).

## –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT](LICENSE)

¬© 2025 Poliklot
